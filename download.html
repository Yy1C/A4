
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸‹è½½æ –ç‰©é›†é¡¹ç›®</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background-color: #fff7ed;
            color: #431407;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }
        .card {
            background: white;
            padding: 3rem;
            border-radius: 1.5rem;
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
            text-align: center;
            max-width: 450px;
            border: 1px solid #ffedd5;
        }
        h1 { margin-top: 0; color: #ea580c; font-size: 1.5rem; margin-bottom: 0.5rem; }
        p { color: #78716c; line-height: 1.6; margin-bottom: 2rem; }
        button {
            background-color: #ea580c;
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 0.75rem;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 6px -1px rgb(234 88 12 / 0.3);
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            width: 100%;
            justify-content: center;
        }
        button:hover { background-color: #c2410c; transform: translateY(-2px); box-shadow: 0 10px 15px -3px rgb(234 88 12 / 0.4); }
        button:active { transform: translateY(0); }
        button:disabled { opacity: 0.7; cursor: wait; }
        .icon { width: 24px; height: 24px; }
    </style>
</head>
<body>
    <div class="card">
        <h1>æ –ç‰©é›† (Qiwuji) ä¸‹è½½å™¨</h1>
        <p>ä¸€é”®ä¸‹è½½æ‰€æœ‰é¡¹ç›®ä»£ç ï¼Œè§£å‹åå³å¯ä½¿ç”¨ã€‚</p>

        <button onclick="downloadProject()" id="btn">
            <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
            ä¸‹è½½é¡¹ç›®å‹ç¼©åŒ…
        </button>
        <p id="status" style="margin-top: 1rem; font-size: 0.9rem; display: none;"></p>
    </div>

    <script>
        const files = {
            "package.json": JSON.stringify({
  "name": "qiwuji-dorm-decor",
  "version": "1.0.0",
  "description": "Student dorm redecoration service booking and blueprint showcase with AI design features.",
  "main": "index.html",
  "scripts": {
    "start": "npx serve"
  },
  "keywords": [
    "react",
    "tailwindcss",
    "gemini-api",
    "student-dorm",
    "interior-design"
  ],
  "author": "Qiwuji Team",
  "license": "MIT",
  "dependencies": {
    "react": "^19.2.0",
    "react-dom": "^19.2.0",
    "@google/genai": "^1.30.0",
    "lucide-react": "^0.554.0"
  }
}, null, 2),

            "README.md": `# æ –ç‰©é›† (Qiwuji) - å®¿èˆæ”¹é€ ä¸ AI è®¾è®¡å¹³å°\n\nä¸€ä¸ªç°ä»£åŒ–çš„ã€ç”± AI é©±åŠ¨çš„å­¦ç”Ÿå®¿èˆè£…é¥°æœåŠ¡ Web åº”ç”¨ã€‚è¯¥å¹³å°å…è®¸å­¦ç”Ÿä½¿ç”¨ Google Gemini ç”Ÿæˆä¸ªæ€§åŒ–çš„æˆ¿é—´è®¾è®¡ç†å¿µï¼Œå¹¶é¢„çº¦ä¸“ä¸šçš„æ”¹é€ æœåŠ¡ã€‚\n\n## âœ¨ åŠŸèƒ½ç‰¹ç‚¹\n\n- **ğŸ¤– AI å®¿èˆé¡¾é—®**: ä½¿ç”¨ Google Gemini 2.5 Flash æ ¹æ®å­¦ç”Ÿçš„åå¥½ç”Ÿæˆä¸ªæ€§åŒ–çš„å®¤å†…è®¾è®¡ç†å¿µã€é…è‰²æ–¹æ¡ˆå’Œè´­ç‰©æ¸…å•ã€‚\n- **ğŸ“… ä¾¿æ·é¢„çº¦ç³»ç»Ÿ**: æµç¨‹åŒ–çš„è¡¨å•ï¼Œç”¨äºé¢„çº¦â€œçº¿ä¸Šè®¾è®¡æ–¹æ¡ˆâ€(Â¥10) æˆ–â€œä¸Šé—¨å…¨æ¡ˆæ”¹é€ â€(Â¥40) æœåŠ¡ã€‚\n- **ğŸ¨ çµæ„Ÿç”»å»Š**: å±•ç¤ºæ”¹é€ åçš„å®¿èˆæ¡ˆä¾‹ã€‚\n- **ğŸ“± å®Œå…¨å“åº”å¼**: åœ¨æ‰‹æœºå’Œç”µè„‘ä¸Šéƒ½èƒ½å®Œç¾å±•ç¤ºã€‚\n\n## ğŸ› ï¸ æŠ€æœ¯æ ˆ\n\n- **å‰ç«¯**: React 19\n- **æ ·å¼**: Tailwind CSS\n- **AI**: Google GenAI SDK (\`@google/genai\`)\n- **å›¾æ ‡**: Lucide React\n\n## ğŸš€ å¿«é€Ÿå¼€å§‹\n\næœ¬é¡¹ç›®è®¾è®¡ä¸ºè½»é‡çº§çš„æ— æ„å»ºåº”ç”¨ï¼Œä½¿ç”¨ ES Modulesã€‚\n\n1. **å…‹éš†ä»“åº“**\n2. **è®¾ç½® API Key**\n   - æ‚¨éœ€è¦ä¸€ä¸ªæœ‰æ•ˆçš„ Google Gemini API Key æ¥ä½¿ç”¨ AI è®¾è®¡å¸ˆåŠŸèƒ½ã€‚\n   - åº”ç”¨æœŸæœ› \`process.env.API_KEY\` å¯ç”¨ã€‚\n3. **è¿è¡Œåº”ç”¨**\n   - æ‚¨å¯ä»¥ä½¿ç”¨ä»»ä½•é™æ€æœåŠ¡å™¨è¿è¡Œæ–‡ä»¶ã€‚\n   - Python ç¤ºä¾‹: \`python3 -m http.server\`\n   - Node ç¤ºä¾‹: \`npx serve\`\n\n## ğŸ“„ è®¸å¯è¯\n\næœ¬é¡¹ç›®ä»…ä¾›æ•™è‚²å’Œæ¼”ç¤ºä½¿ç”¨ã€‚`,

            "metadata.json": JSON.stringify({
  "name": "æ –ç‰©é›† (Qiwuji) - å®¿èˆæ”¹é€ ",
  "description": "å­¦ç”Ÿå®¿èˆæ”¹é€ æœåŠ¡é¢„è®¢ä¸æ¡ˆä¾‹å±•ç¤ºã€‚æä¾› AI è¾…åŠ©è®¾è®¡å’¨è¯¢åŠä¾¿æ·çš„åœ¨çº¿é¢„çº¦æœåŠ¡ã€‚",
  "requestFramePermissions": []
}, null, 2),

            "index.html": `<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="æ –ç‰©é›† (Qiwuji) - ä¸“ä¸šçš„å­¦ç”Ÿå®¿èˆæ”¹é€ æœåŠ¡ã€‚è·å– AI è®¾è®¡æ–¹æ¡ˆä»…éœ€ Â¥10ï¼Œå…¨æ¡ˆä¸Šé—¨æ”¹é€  Â¥40ã€‚" />
    <title>æ –ç‰©é›† | æ ¡å›­å®¿èˆæ”¹é€ </title>
    <script src="https://cdn.tailwindcss.com"><\/script>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap');
      body {
        font-family: 'Noto Sans SC', sans-serif;
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.30.0",
    "lucide-react": "https://aistudiocdn.com/lucide-react@^0.554.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/"
  }
}
<\/script>
</head>
  <body class="bg-orange-50 text-stone-800 antialiased">
    <div id="root"></div>
  </body>
</html>`,

            "index.tsx": `import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';

const rootElement = document.getElementById('root');
if (!rootElement) {
  throw new Error("Could not find root element to mount to");
}

const root = ReactDOM.createRoot(rootElement);
root.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);`,

            "types.ts": `export enum ServiceType {
  BLUEPRINT = 'BLUEPRINT',
  FULL_SERVICE = 'FULL_SERVICE'
}

export interface ServiceOption {
  id: ServiceType;
  title: string;
  price: number;
  description: string;
  features: string[];
}

export interface BookingFormState {
  name: string;
  studentId: string;
  dormNumber: string;
  phone: string;
  serviceType: ServiceType;
  preferredDate: string;
  notes: string;
}

export interface DesignIdea {
  title: string;
  concept: string;
  colorPalette: string[];
  furnitureArrangement: string;
  decorItems: string[];
}`,

            "constants.tsx": `import { ServiceType, ServiceOption } from './types';
import { PenTool, Hammer, Palette, Ruler } from 'lucide-react';
import React from 'react';

export const SERVICES: ServiceOption[] = [
  {
    id: ServiceType.BLUEPRINT,
    title: "çº¿ä¸Šè®¾è®¡æ–¹æ¡ˆ",
    price: 10,
    description: "é€‚åˆåŠ¨æ‰‹èƒ½åŠ›å¼ºçš„åŒå­¦ã€‚æˆ‘ä»¬æä¾›æ–¹æ¡ˆï¼Œä½ æ¥å®ç°ã€‚",
    features: [
      "2D å¹³é¢å¸ƒå±€å›¾ (PDF)",
      "å®šåˆ¶é…è‰²æ–¹æ¡ˆ",
      "è½¯è£…è´­ç‰©æ¸…å• (å«é“¾æ¥)",
      "çº¿ä¸Šå’¨è¯¢ (30åˆ†é’Ÿ)"
    ]
  },
  {
    id: ServiceType.FULL_SERVICE,
    title: "ä¸Šé—¨å…¨æ¡ˆæ”¹é€ ",
    price: 40,
    description: "åäº«å…¶æˆã€‚æˆ‘ä»¬ä¸ºä½ æå®šä¸€åˆ‡ã€‚",
    features: [
      "åŒ…å«æ‰€æœ‰çº¿ä¸Šè®¾è®¡æœåŠ¡",
      "ä¸Šé—¨å®¶å…·å¸ƒå±€è°ƒæ•´",
      "è½¯è£…å®‰è£…ä¸å¸ƒç½®",
      "çº¿è·¯æ”¶çº³ä¸æ¸…æ´",
      "æ”¹é€ åç²¾ç¾æ‘„å½±"
    ]
  }
];
`,

            "App.tsx": `import React, { useState } from 'react';
import Navbar from './components/Navbar';
import BookingForm from './components/BookingForm';
import AIPlanner from './components/AIPlanner';
import { SERVICES } from './constants';
import { ArrowRight, Ruler, Truck } from 'lucide-react';

const App: React.FC = () => {
  const [activeTab, setActiveTab] = useState('home');

  const renderContent = () => {
    switch (activeTab) {
      case 'home':
        return (
          <div className="space-y-16 pb-20">
            {/* Hero Section */}
            <section className="relative h-[80vh] min-h-[600px] flex items-center justify-center rounded-b-[3rem] shadow-xl bg-orange-600 overflow-hidden">
              <div className="relative z-10 text-center px-4 max-w-3xl mx-auto flex flex-col items-center">
                
                <h1 className="text-5xl md:text-7xl font-bold text-white mb-6 tracking-tight animate-in slide-in-from-bottom-4 duration-700 delay-150">
                  æ –ç‰©é›† <span className="block text-xl md:text-3xl font-light mt-2 tracking-widest text-orange-100">QI WU JI</span>
                </h1>
                <p className="text-lg md:text-xl text-orange-50 mb-8 font-light leading-relaxed animate-in slide-in-from-bottom-4 duration-700 delay-300">
                  æ‰“é€ ç†æƒ³çš„æ ¡å›­ç”Ÿæ´»ç©ºé—´ã€‚<br className="hidden md:block"/>
                  ä¸“ä¸šçº¿ä¸Šè®¾è®¡ Â¥10 | ä¸Šé—¨å…¨æ¡ˆæ”¹é€  Â¥40
                </p>
                <div className="flex flex-col sm:flex-row gap-4 justify-center animate-in slide-in-from-bottom-4 duration-700 delay-500">
                  <button 
                    onClick={() => setActiveTab('booking')}
                    className="px-8 py-3 bg-white text-orange-600 hover:bg-orange-50 rounded-full font-semibold transition flex items-center justify-center gap-2 shadow-lg"
                  >
                    ç«‹å³é¢„çº¦ <ArrowRight size={18} />
                  </button>
                  <button 
                    onClick={() => setActiveTab('planner')}
                    className="px-8 py-3 bg-orange-700 hover:bg-orange-800 text-white border border-orange-500 rounded-full font-semibold transition"
                  >
                    ä½“éªŒ AI è®¾è®¡
                  </button>
                </div>
              </div>
            </section>

            {/* Services Overview */}
            <section className="max-w-6xl mx-auto px-6">
              <div className="text-center mb-12">
                <h2 className="text-3xl font-bold text-stone-800 mb-4">æœåŠ¡é¡¹ç›®</h2>
                <div className="w-16 h-1 bg-orange-500 mx-auto rounded-full"></div>
              </div>
              
              <div className="grid md:grid-cols-2 gap-8">
                {SERVICES.map((service, index) => (
                  <div key={index} className="bg-white p-8 rounded-2xl shadow-sm border border-orange-100 hover:shadow-md transition-shadow group">
                    <div className="w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center mb-6 text-orange-600 group-hover:scale-110 transition-transform">
                      {index === 0 ? <Ruler size={24} /> : <Truck size={24} />}
                    </div>
                    <h3 className="text-2xl font-bold text-stone-800 mb-2">{service.title}</h3>
                    <p className="text-4xl font-bold text-orange-600 mb-4">Â¥{service.price}</p>
                    <p className="text-stone-500 mb-6">{service.description}</p>
                    <ul className="space-y-3 mb-8">
                      {service.features.map((feat, i) => (
                        <li key={i} className="flex items-center gap-3 text-stone-600 text-sm">
                          <div className="w-1.5 h-1.5 rounded-full bg-orange-400"></div>
                          {feat}
                        </li>
                      ))}
                    </ul>
                    <button 
                      onClick={() => setActiveTab('booking')}
                      className="w-full py-3 border border-orange-600 text-orange-700 font-semibold rounded-xl hover:bg-orange-50 transition"
                    >
                      é€‰æ‹©æ­¤æ–¹æ¡ˆ
                    </button>
                  </div>
                ))}
              </div>
            </section>
          </div>
        );

      case 'planner':
        return (
          <div className="pt-24 pb-20 px-6 min-h-screen">
            <AIPlanner onBookNow={() => setActiveTab('booking')} />
          </div>
        );

      case 'booking':
        return (
          <div className="pt-24 pb-20 px-6 min-h-screen">
            <BookingForm />
          </div>
        );

      default:
        return null;
    }
  };

  return (
    <div className="min-h-screen text-stone-800 selection:bg-orange-200 selection:text-orange-900">
      <Navbar activeTab={activeTab} setActiveTab={(tab) => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
        setActiveTab(tab);
      }} />
      
      <main className="animate-in fade-in duration-500">
        {renderContent()}
      </main>

      <footer className="bg-stone-900 text-stone-400 py-12 px-6 pb-24 md:pb-12 text-center text-sm">
        <p className="font-bold text-stone-200 text-lg mb-2">æ –ç‰©é›† Qiwuji</p>
        <p>Â© {new Date().getFullYear()} æ ¡å›­å®¿èˆæ”¹é€ æœåŠ¡. ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚</p>
        <div className="mt-4 flex justify-center gap-4">
          <a href="#" className="hover:text-orange-400 transition">æœåŠ¡æ¡æ¬¾</a>
          <a href="#" className="hover:text-orange-400 transition">éšç§æ”¿ç­–</a>
          <a href="#" className="hover:text-orange-400 transition">è”ç³»æˆ‘ä»¬</a>
        </div>
      </footer>
    </div>
  );
};

export default App;`,

            "services/geminiService.ts": `import { GoogleGenAI, Type } from "@google/genai";
import { DesignIdea } from '../types';

const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });

export const generateDormConcept = async (
  style: string,
  roomSize: string,
  occupants: number
): Promise<DesignIdea> => {
  try {
    const prompt = \`
      Create a dorm room interior design concept for a \${occupants}-person room.
      Room size description: \${roomSize}.
      Desired Style: \${style}.
      
      Provide a creative title, a concept description, a color palette (hex codes or names), 
      layout advice (furniture arrangement), and a list of low-cost decor items suitable for students.
      The output must be structured JSON.
      IMPORTANT: All text content in the JSON must be in Simplified Chinese (zh-CN).
    \`;

    const response = await ai.models.generateContent({
      model: "gemini-2.5-flash",
      contents: prompt,
      config: {
        responseMimeType: "application/json",
        responseSchema: {
          type: Type.OBJECT,
          properties: {
            title: { type: Type.STRING },
            concept: { type: Type.STRING },
            colorPalette: { 
              type: Type.ARRAY, 
              items: { type: Type.STRING } 
            },
            furnitureArrangement: { type: Type.STRING },
            decorItems: { 
              type: Type.ARRAY, 
              items: { type: Type.STRING } 
            }
          },
          required: ["title", "concept", "colorPalette", "furnitureArrangement", "decorItems"]
        }
      }
    });

    const text = response.text;
    if (!text) throw new Error("No response from AI");
    
    return JSON.parse(text) as DesignIdea;

  } catch (error) {
    console.error("Error generating design:", error);
    throw error;
  }
};`,

            "components/Navbar.tsx": `import React from 'react';
import { Home, Calendar, Sparkles } from 'lucide-react';

interface NavbarProps {
  activeTab: string;
  setActiveTab: (tab: string) => void;
}

const Navbar: React.FC<NavbarProps> = ({ activeTab, setActiveTab }) => {
  const navItems = [
    { id: 'home', label: 'é¦–é¡µ', icon: Home },
    { id: 'planner', label: 'AI è®¾è®¡å¸ˆ', icon: Sparkles },
    { id: 'booking', label: 'ç«‹å³é¢„çº¦', icon: Calendar },
  ];

  return (
    <nav className="fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-md border-t border-stone-200 p-2 md:top-0 md:bottom-auto md:border-b md:border-t-0 z-50">
      <div className="max-w-4xl mx-auto flex justify-around md:justify-end md:gap-8 items-center h-14">
        <div className="hidden md:flex flex-1 items-center gap-3">
          <div className="text-2xl font-bold text-orange-600 tracking-tighter">
            æ –ç‰©é›† <span className="text-stone-400 font-light text-lg ml-1">Qiwuji</span>
          </div>
        </div>
        {navItems.map((item) => (
          <button
            key={item.id}
            onClick={() => setActiveTab(item.id)}
            className={\`flex flex-col md:flex-row items-center gap-1 md:gap-2 px-3 py-2 rounded-lg transition-colors duration-200
              \${activeTab === item.id 
                ? 'text-orange-700 bg-orange-50' 
                : 'text-stone-500 hover:text-orange-600 hover:bg-stone-50'}\`}
          >
            <item.icon size={20} strokeWidth={activeTab === item.id ? 2.5 : 2} />
            <span className="text-xs md:text-sm font-medium">{item.label}</span>
          </button>
        ))}
      </div>
    </nav>
  );
};

export default Navbar;`,

            "components/BookingForm.tsx": `import React, { useState } from 'react';
import { ServiceType, BookingFormState } from '../types';
import { SERVICES } from '../constants';
import { CheckCircle2, AlertCircle, Loader2 } from 'lucide-react';

const BookingForm: React.FC = () => {
  const [formData, setFormData] = useState<BookingFormState>({
    name: '',
    studentId: '',
    dormNumber: '',
    phone: '',
    serviceType: ServiceType.BLUEPRINT,
    preferredDate: '',
    notes: ''
  });

  const [status, setStatus] = useState<'idle' | 'submitting' | 'success' | 'error'>('idle');

  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {
    setFormData(prev => ({
      ...prev,
      [e.target.name]: e.target.value
    }));
  };

  const handleServiceSelect = (type: ServiceType) => {
    setFormData(prev => ({ ...prev, serviceType: type }));
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setStatus('submitting');
    
    // Simulate API call
    setTimeout(() => {
      setStatus('success');
      // In a real app, reset form or redirect here
    }, 1500);
  };

  if (status === 'success') {
    return (
      <div className="flex flex-col items-center justify-center p-12 bg-orange-50 rounded-2xl border border-orange-100 animate-in fade-in zoom-in duration-300">
        <CheckCircle2 size={64} className="text-orange-600 mb-4" />
        <h2 className="text-2xl font-bold text-orange-800 mb-2">é¢„çº¦æˆåŠŸï¼</h2>
        <p className="text-center text-stone-600 mb-6">
          æ„Ÿè°¢æ‚¨ï¼Œ{formData.name}ã€‚æˆ‘ä»¬å·²æ”¶åˆ°æ‚¨å…³äº <span className="font-semibold">{formData.serviceType === ServiceType.BLUEPRINT ? 'çº¿ä¸Šè®¾è®¡æ–¹æ¡ˆ' : 'ä¸Šé—¨å…¨æ¡ˆæ”¹é€ '}</span> çš„é¢„çº¦ç”³è¯·ã€‚
        </p>
        <p className="text-sm text-stone-500">æˆ‘ä»¬ä¼šå°½å¿«é€šè¿‡ {formData.phone} è”ç³»æ‚¨ã€‚</p>
        <button 
          onClick={() => setStatus('idle')}
          className="mt-8 px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition"
        >
          å†çº¦ä¸€å•
        </button>
      </div>
    );
  }

  return (
    <div className="max-w-2xl mx-auto bg-white p-6 md:p-8 rounded-2xl shadow-sm border border-stone-200">
      <h2 className="text-2xl font-bold text-stone-800 mb-6">é¢„çº¦æ‚¨çš„å®¿èˆæ”¹é€ </h2>
      
      <form onSubmit={handleSubmit} className="space-y-6">
        
        {/* Service Selection */}
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          {SERVICES.map((service) => (
            <div
              key={service.id}
              onClick={() => handleServiceSelect(service.id)}
              className={\`cursor-pointer p-4 rounded-xl border-2 transition-all duration-200 relative
                \${formData.serviceType === service.id 
                  ? 'border-orange-500 bg-orange-50/50' 
                  : 'border-stone-200 hover:border-orange-200 hover:bg-stone-50'}\`}
            >
              {formData.serviceType === service.id && (
                <div className="absolute top-3 right-3 text-orange-600">
                  <CheckCircle2 size={20} />
                </div>
              )}
              <h3 className="font-bold text-lg text-stone-800">{service.title}</h3>
              <p className="text-orange-600 font-bold text-xl my-1">Â¥{service.price}</p>
              <p className="text-xs text-stone-500">{service.description}</p>
            </div>
          ))}
        </div>

        {/* Personal Details */}
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label className="block text-sm font-medium text-stone-700 mb-1">å§“å</label>
            <input
              required
              name="name"
              type="text"
              value={formData.name}
              onChange={handleChange}
              className="w-full px-4 py-2 rounded-lg border border-stone-300 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition"
              placeholder="ææ˜"
            />
          </div>
          <div>
            <label className="block text-sm font-medium text-stone-700 mb-1">æ‰‹æœºå·ç </label>
            <input
              required
              name="phone"
              type="tel"
              value={formData.phone}
              onChange={handleChange}
              className="w-full px-4 py-2 rounded-lg border border-stone-300 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition"
              placeholder="138 0000 0000"
            />
          </div>
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label className="block text-sm font-medium text-stone-700 mb-1">å­¦å·</label>
            <input
              required
              name="studentId"
              type="text"
              value={formData.studentId}
              onChange={handleChange}
              className="w-full px-4 py-2 rounded-lg border border-stone-300 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition"
            />
          </div>
          <div>
            <label className="block text-sm font-medium text-stone-700 mb-1">å®¿èˆæ¥¼åŠæˆ¿é—´å·</label>
            <input
              required
              name="dormNumber"
              type="text"
              value={formData.dormNumber}
              onChange={handleChange}
              className="w-full px-4 py-2 rounded-lg border border-stone-300 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition"
              placeholder="Aæ ‹ 302å®¤"
            />
          </div>
        </div>

        <div>
          <label className="block text-sm font-medium text-stone-700 mb-1">æœŸæœ›ä¸Šé—¨æ—¥æœŸ (ä»…é™ä¸Šé—¨æœåŠ¡)</label>
          <input
            name="preferredDate"
            type="date"
            value={formData.preferredDate}
            onChange={handleChange}
            className="w-full px-4 py-2 rounded-lg border border-stone-300 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition"
          />
        </div>

        <div>
          <label className="block text-sm font-medium text-stone-700 mb-1">ç‰¹æ®Šéœ€æ±‚ / é£æ ¼åå¥½</label>
          <textarea
            name="notes"
            rows={3}
            value={formData.notes}
            onChange={handleChange}
            className="w-full px-4 py-2 rounded-lg border border-stone-300 focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition"
            placeholder="ä¾‹å¦‚ï¼šæˆ‘å–œæ¬¢æš–è‰²è°ƒç¯å…‰ï¼Œæƒ³è¦ä¸€ä¸ªæç®€é£æ ¼çš„æ¡Œé¢..."
          />
        </div>

        <button
          type="submit"
          disabled={status === 'submitting'}
          className="w-full py-3 bg-orange-600 hover:bg-orange-700 text-white font-bold rounded-lg shadow-md hover:shadow-lg transition-all transform active:scale-95 flex items-center justify-center gap-2"
        >
          {status === 'submitting' ? (
            <>
              <Loader2 className="animate-spin" size={20} /> æäº¤ä¸­...
            </>
          ) : (
            'ç¡®è®¤é¢„çº¦'
          )}
        </button>

      </form>
    </div>
  );
};

export default BookingForm;`,

            "components/AIPlanner.tsx": `import React, { useState } from 'react';
import { generateDormConcept } from '../services/geminiService';
import { DesignIdea } from '../types';
import { Sparkles, Palette, Armchair, ShoppingBag, ArrowRight } from 'lucide-react';

interface AIPlannerProps {
  onBookNow: () => void;
}

const AIPlanner: React.FC<AIPlannerProps> = ({ onBookNow }) => {
  const [style, setStyle] = useState('');
  const [roomSize, setRoomSize] = useState('æ ‡å‡†å››äººé—´ (ä¸ŠåºŠä¸‹æ¡Œ)');
  const [occupants, setOccupants] = useState(4);
  const [idea, setIdea] = useState<DesignIdea | null>(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState('');

  const handleGenerate = async () => {
    if (!style.trim()) return;
    setLoading(true);
    setError('');
    setIdea(null);
    try {
      const result = await generateDormConcept(style, roomSize, occupants);
      setIdea(result);
    } catch (err) {
      setError("ç”Ÿæˆå¤±è´¥ï¼Œè¯·é‡è¯•ã€‚");
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="max-w-4xl mx-auto space-y-8">
      <div className="text-center space-y-4">
        <h2 className="text-3xl font-bold text-stone-800 flex items-center justify-center gap-2">
          <Sparkles className="text-orange-500" fill="currentColor" />
          AI å®¿èˆæ”¹é€ é¡¾é—®
        </h2>
        <p className="text-stone-600 max-w-xl mx-auto">
          ä¸çŸ¥é“ä»ä½•ä¸‹æ‰‹ï¼Ÿå‘Šè¯‰ AI ä½ å–œæ¬¢çš„é£æ ¼ï¼Œæˆ‘ä»¬å°†å…è´¹ä¸ºä½ ç”Ÿæˆè®¾è®¡çµæ„Ÿå¡ç‰‡ã€‚
          å–œæ¬¢è¿™ä¸ªæ–¹æ¡ˆï¼Ÿé¢„çº¦æˆ‘ä»¬çš„â€œçº¿ä¸Šè®¾è®¡æœåŠ¡â€è·å–å®Œæ•´è½åœ°æŒ‡å—ï¼
        </p>
      </div>

      {/* Input Section */}
      <div className="bg-white p-6 rounded-2xl shadow-sm border border-orange-100 grid grid-cols-1 md:grid-cols-3 gap-4 items-end">
        <div>
          <label className="block text-xs font-semibold uppercase text-stone-500 mb-1">å–œæ¬¢çš„é£æ ¼</label>
          <input 
            type="text" 
            value={style}
            onChange={(e) => setStyle(e.target.value)}
            placeholder="ä¾‹å¦‚ï¼šæç®€é£ã€æ³¢è¥¿ç±³äºšã€èµ›åšæœ‹å…‹"
            className="w-full p-3 bg-stone-50 border border-stone-200 rounded-lg focus:ring-2 focus:ring-orange-500 outline-none"
          />
        </div>
        <div>
          <label className="block text-xs font-semibold uppercase text-stone-500 mb-1">æˆ¿å‹</label>
          <select 
            value={roomSize}
            onChange={(e) => setRoomSize(e.target.value)}
            className="w-full p-3 bg-stone-50 border border-stone-200 rounded-lg focus:ring-2 focus:ring-orange-500 outline-none"
          >
            <option>æ ‡å‡†å››äººé—´ (ä¸ŠåºŠä¸‹æ¡Œ)</option>
            <option>å…­äººå¥—é—´</option>
          </select>
        </div>
        <button
          onClick={handleGenerate}
          disabled={loading || !style}
          className="w-full p-3 bg-stone-800 text-white rounded-lg hover:bg-stone-900 disabled:opacity-50 disabled:cursor-not-allowed font-medium transition flex items-center justify-center gap-2"
        >
          {loading ? 'æ€è€ƒä¸­...' : 'ç”Ÿæˆçµæ„Ÿ'}
        </button>
      </div>

      {error && (
        <div className="p-4 bg-red-50 text-red-600 rounded-lg text-center">
          {error}
        </div>
      )}

      {/* Result Section */}
      {idea && (
        <div className="bg-white border border-orange-200 rounded-2xl p-6 md:p-8 animate-in slide-in-from-bottom-4 duration-500 shadow-lg shadow-orange-100">
          <div className="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
            <div>
              <h3 className="text-2xl font-bold text-orange-600">{idea.title}</h3>
              <p className="text-stone-600 italic mt-1">{idea.concept}</p>
            </div>
            <button 
              onClick={onBookNow}
              className="whitespace-nowrap px-6 py-2 bg-orange-600 text-white rounded-full font-medium hover:bg-orange-700 transition flex items-center gap-2 shadow-lg shadow-orange-200"
            >
              è·å–å®Œæ•´è®¾è®¡å›¾ Â¥10 <ArrowRight size={16} />
            </button>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div className="bg-orange-50/50 p-5 rounded-xl shadow-sm border border-orange-100">
              <div className="flex items-center gap-2 mb-3 text-stone-800 font-semibold">
                <Palette size={18} className="text-orange-500" /> é…è‰²æ–¹æ¡ˆ
              </div>
              <div className="flex flex-wrap gap-2">
                {idea.colorPalette.map((color, idx) => (
                  <div key={idx} className="flex flex-col items-center gap-1">
                    <div 
                      className="w-10 h-10 rounded-full border border-stone-100 shadow-inner" 
                      style={{ backgroundColor: color.includes('#') ? color : '#e5e7eb' }} 
                    />
                    <span className="text-[10px] text-stone-500 uppercase">{color.replace('#','')}</span>
                  </div>
                ))}
              </div>
            </div>

            <div className="bg-stone-50 p-5 rounded-xl shadow-sm border border-stone-100">
              <div className="flex items-center gap-2 mb-3 text-stone-800 font-semibold">
                <Armchair size={18} className="text-orange-500" /> å¸ƒå±€å»ºè®®
              </div>
              <p className="text-sm text-stone-600 leading-relaxed">
                {idea.furnitureArrangement}
              </p>
            </div>

            <div className="bg-stone-50 p-5 rounded-xl shadow-sm border border-stone-100">
              <div className="flex items-center gap-2 mb-3 text-stone-800 font-semibold">
                <ShoppingBag size={18} className="text-orange-500" /> æ¨èå¥½ç‰©
              </div>
              <ul className="text-sm text-stone-600 space-y-1 list-disc pl-4">
                {idea.decorItems.map((item, idx) => (
                  <li key={idx}>{item}</li>
                ))}
              </ul>
            </div>
          </div>
          
          <div className="mt-6 text-center text-xs text-stone-400">
            * è¿™æ˜¯ä¸€ä¸ª AI ç”Ÿæˆçš„é¢„è§ˆã€‚é¢„çº¦è®¾è®¡æœåŠ¡ä»¥è·å–ç²¾ç¡®å°ºå¯¸å’Œè´­ä¹°é“¾æ¥ã€‚
          </div>
        </div>
      )}
    </div>
  );
};

export default AIPlanner;`
        };

        async function downloadProject() {
            const btn = document.getElementById('btn');
            const status = document.getElementById('status');
            
            btn.disabled = true;
            status.style.display = 'block';
            status.innerText = "æ­£åœ¨æ‰“åŒ…...";
            status.style.color = "#78716c";

            try {
                const zip = new JSZip();
                
                // Add all files to the zip
                for (const [path, content] of Object.entries(files)) {
                    zip.file(path, content);
                }
                
                // Generate zip blob
                const blob = await zip.generateAsync({type: "blob"});
                
                // Trigger download
                saveAs(blob, "qiwuji-dorm-decor.zip");
                
                status.innerText = "ä¸‹è½½å·²å¼€å§‹ï¼è§£å‹åå³å¯ä½¿ç”¨ã€‚";
                status.style.color = "#16a34a"; // green
                
                setTimeout(() => {
                    btn.disabled = false;
                    status.style.display = 'none';
                }, 3000);

            } catch (err) {
                console.error("Zip Error:", err);
                status.innerText = "åˆ›å»ºå‹ç¼©åŒ…æ—¶å‡ºé”™ï¼Œè¯·æŸ¥çœ‹æ§åˆ¶å°ã€‚";
                status.style.color = "#dc2626"; // red
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>
